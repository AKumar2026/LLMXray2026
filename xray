<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>How ChatGPT Works ‚Äî Visualizer</title>

  <!-- ===============================
       MODERN UI STYLES
       =============================== -->
  <style>
    body {
      font-family: Inter, system-ui, sans-serif;
      background: radial-gradient(circle at top, #0f172a, #020617);
      color: #e5e7eb;
      margin: 0;
      padding: 0;
    }

    h1 {
      text-align: center;
      margin-top: 24px;
      font-weight: 700;
    }

    .container {
      max-width: 1100px;
      margin: auto;
      padding: 24px;
    }

    /* Input section */
    .input-box {
      display: flex;
      gap: 12px;
      margin-bottom: 24px;
    }

    textarea {
      flex: 1;
      padding: 14px;
      border-radius: 12px;
      border: none;
      font-size: 16px;
      resize: none;
    }

    button {
      padding: 14px 22px;
      border-radius: 12px;
      border: none;
      font-size: 16px;
      cursor: pointer;
      background: linear-gradient(135deg, #38bdf8, #818cf8);
      color: #020617;
      font-weight: 600;
    }

    /* Pipeline layout */
    .pipeline {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 14px;
    }

    .stage {
      background: rgba(255, 255, 255, 0.04);
      border-radius: 14px;
      padding: 14px;
      min-height: 180px;
      position: relative;
      overflow: hidden;
    }

    .stage h3 {
      margin-top: 0;
      font-size: 15px;
      color: #93c5fd;
    }

    /* Progress bar */
    .progress {
      height: 6px;
      background: #020617;
      border-radius: 999px;
      overflow: hidden;
      margin-bottom: 10px;
    }

    .progress span {
      display: block;
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #22d3ee, #818cf8);
      transition: width 0.6s ease;
    }

    /* Token chips */
    .token {
      display: inline-block;
      background: rgba(56, 189, 248, 0.15);
      border: 1px solid #38bdf8;
      border-radius: 999px;
      padding: 4px 10px;
      margin: 4px;
      font-size: 13px;
    }

    /* Vector bars */
    .vector {
      height: 8px;
      background: linear-gradient(90deg, #22d3ee, #818cf8);
      border-radius: 999px;
      margin: 6px 0;
      animation: grow 0.8s ease forwards;
      width: 0%;
    }

    @keyframes grow {
      to { width: var(--w); }
    }

    /* Final output */
    .output {
      font-size: 14px;
      line-height: 1.5;
      color: #e0f2fe;
    }

    footer {
      text-align: center;
      opacity: 0.6;
      margin-top: 28px;
      font-size: 13px;
    }
  </style>
</head>

<body>
  <h1>üß† How ChatGPT Thinks (Visual Simulator)</h1>

  <div class="container">
    <!-- ===============================
         USER INPUT
         =============================== -->
    <div class="input-box">
      <textarea id="userInput" rows="3" placeholder="Type a question for ChatGPT..."></textarea>
      <button onclick="runPipeline()">Send</button>
    </div>

    <!-- ===============================
         VISUAL PIPELINE
         =============================== -->
    <div class="pipeline">

      <div class="stage">
        <h3>1Ô∏è‚É£ Input Tokens</h3>
        <div class="progress"><span id="p1"></span></div>
        <div id="tokens"></div>
      </div>

      <div class="stage">
        <h3>2Ô∏è‚É£ Embeddings</h3>
        <div class="progress"><span id="p2"></span></div>
        <div id="embeddings"></div>
      </div>

      <div class="stage">
        <h3>3Ô∏è‚É£ Vector Processing</h3>
        <div class="progress"><span id="p3"></span></div>
        <div id="vectors"></div>
      </div>

      <div class="stage">
        <h3>4Ô∏è‚É£ Output Tokens</h3>
        <div class="progress"><span id="p4"></span></div>
        <div id="outputTokens"></div>
      </div>

      <div class="stage">
        <h3>5Ô∏è‚É£ Final Answer</h3>
        <div class="progress"><span id="p5"></span></div>
        <div class="output" id="finalAnswer"></div>
      </div>

    </div>
  </div>

  <footer>
    This is a visual learning simulator ‚Äî not the real ChatGPT API
  </footer>

  <!-- ===============================
       LOGIC (PURE JS)
       =============================== -->
  <script>
    // Utility: fake delay to simulate model thinking
    const wait = ms => new Promise(res => setTimeout(res, ms));

    async function runPipeline() {
      // Reset UI
      document.querySelectorAll(".progress span").forEach(p => p.style.width = "0%");
      ["tokens", "embeddings", "vectors", "outputTokens", "finalAnswer"]
        .forEach(id => document.getElementById(id).innerHTML = "");

      const text = document.getElementById("userInput").value.trim();
      if (!text) return;

      /* ===============================
         1. TOKENIZATION
         =============================== */
      document.getElementById("p1").style.width = "100%";

      // Simple whitespace tokenization (for learning only)
      const tokens = text.split(" ");

      tokens.forEach(t => {
        const el = document.createElement("span");
        el.className = "token";
        el.textContent = t;
        document.getElementById("tokens").appendChild(el);
      });

      await wait(800);

      /* ===============================
         2. EMBEDDINGS
         =============================== */
      document.getElementById("p2").style.width = "100%";

      tokens.forEach(() => {
        // Each token ‚Üí high-dimensional vector (simulated)
        const v = document.createElement("div");
        v.className = "vector";
        v.style.setProperty("--w", `${30 + Math.random() * 70}%`);
        document.getElementById("embeddings").appendChild(v);
      });

      await wait(800);

      /* ===============================
         3. VECTOR PROCESSING (ATTENTION)
         =============================== */
      document.getElementById("p3").style.width = "100%";

      for (let i = 0; i < 6; i++) {
        const v = document.createElement("div");
        v.className = "vector";
        v.style.setProperty("--w", `${40 + Math.random() * 60}%`);
        document.getElementById("vectors").appendChild(v);
      }

      await wait(900);

      /* ===============================
         4. OUTPUT TOKENS
         =============================== */
      document.getElementById("p4").style.width = "100%";

      const output = ["This", "is", "a", "generated", "response"];
      output.forEach(t => {
        const el = document.createElement("span");
        el.className = "token";
        el.textContent = t;
        document.getElementById("outputTokens").appendChild(el);
      });

      await wait(700);

      /* ===============================
         5. FINAL RESPONSE
         =============================== */
      document.getElementById("p5").style.width = "100%";

      document.getElementById("finalAnswer").textContent =
        "This is a simulated answer generated after processing tokens, embeddings, vectors, and probabilities ‚Äî just like ChatGPT does internally.";
    }
  </script>
</body>
</html>

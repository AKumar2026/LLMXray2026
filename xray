<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>How ChatGPT Works â€“ Visual Simulator</title>

  <!-- =========================
       MODERN UI STYLES
       ========================= -->
  <style>
    body {
      margin: 0;
      font-family: "Inter", system-ui, sans-serif;
      background: linear-gradient(135deg, #0f172a, #020617);
      color: #e5e7eb;
    }

    header {
      padding: 24px;
      text-align: center;
      background: rgba(255,255,255,0.03);
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }

    header h1 {
      margin: 0;
      font-size: 28px;
      font-weight: 700;
    }

    header p {
      opacity: 0.7;
      margin-top: 6px;
    }

    main {
      max-width: 1100px;
      margin: auto;
      padding: 24px;
    }

    textarea {
      width: 100%;
      padding: 16px;
      border-radius: 12px;
      border: none;
      resize: none;
      font-size: 16px;
      background: #020617;
      color: #e5e7eb;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.08);
    }

    textarea:focus {
      outline: none;
      box-shadow: inset 0 0 0 2px #6366f1;
    }

    button {
      margin-top: 16px;
      padding: 12px 20px;
      border-radius: 10px;
      border: none;
      font-size: 16px;
      cursor: pointer;
      background: #6366f1;
      color: white;
      font-weight: 600;
    }

    button:hover {
      background: #4f46e5;
    }

    .progress-container {
      margin: 24px 0;
      background: #020617;
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.08);
    }

    .progress-bar {
      height: 10px;
      width: 0%;
      background: linear-gradient(90deg, #22d3ee, #6366f1);
      transition: width 0.6s ease;
    }

    .steps {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 16px;
    }

    .step {
      background: rgba(255,255,255,0.04);
      border-radius: 14px;
      padding: 16px;
      border: 1px solid rgba(255,255,255,0.08);
      opacity: 0.35;
      transform: translateY(8px);
      transition: all 0.4s ease;
    }

    .step.active {
      opacity: 1;
      transform: translateY(0);
      border-color: #6366f1;
    }

    .step h3 {
      margin-top: 0;
      font-size: 16px;
      color: #a5b4fc;
    }

    .output {
      margin-top: 24px;
      padding: 16px;
      border-radius: 12px;
      background: #020617;
      border: 1px solid rgba(255,255,255,0.08);
      font-size: 15px;
    }

    .token {
      display: inline-block;
      padding: 4px 8px;
      margin: 4px;
      border-radius: 6px;
      background: rgba(99,102,241,0.15);
      border: 1px solid rgba(99,102,241,0.4);
      font-size: 13px;
    }

    footer {
      text-align: center;
      padding: 20px;
      opacity: 0.4;
      font-size: 13px;
    }
  </style>
</head>

<body>

<header>
  <h1>How ChatGPT Works â€“ Visual Simulator</h1>
  <p>Type a query and watch how an LLM processes it step by step</p>
</header>

<main>

  <!-- USER INPUT -->
  <textarea id="userInput" rows="4" placeholder="Ask ChatGPT anything..."></textarea>
  <button onclick="runSimulation()">Run Simulation</button>

  <!-- PROGRESS BAR -->
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <!-- VISUAL STEPS -->
  <div class="steps">
    <div class="step" id="step1">
      <h3>1. Tokenization</h3>
      <div id="tokens"></div>
    </div>

    <div class="step" id="step2">
      <h3>2. Embeddings</h3>
      <p>Tokens are converted into high-dimensional vectors (numbers).</p>
      <div id="embeddings"></div>
    </div>

    <div class="step" id="step3">
      <h3>3. Attention Mechanism</h3>
      <p>Tokens look at each other to understand context and meaning.</p>
    </div>

    <div class="step" id="step4">
      <h3>4. Probability Prediction</h3>
      <p>The model predicts the most likely next token.</p>
    </div>

    <div class="step" id="step5">
      <h3>5. Response Generation</h3>
      <p>Tokens are generated one by one until a full answer is formed.</p>
    </div>
  </div>

  <!-- FINAL OUTPUT -->
  <div class="output" id="finalOutput"></div>

</main>

<footer>
  Educational visualization Â· Not a real LLM Â· Built with pure HTML, CSS & JS
</footer>

<!-- =========================
     JAVASCRIPT LOGIC
     ========================= -->
<script>
  /*
    Utility: Pause execution for animation timing
  */
  const wait = (ms) => new Promise(resolve => setTimeout(resolve, ms));

  /*
    Main simulation function
  */
  async function runSimulation() {
    const input = document.getElementById("userInput").value.trim();
    if (!input) return;

    resetUI();

    // STEP 1: TOKENIZATION
    activateStep(1, 20);
    const tokens = input.split(" ");
    const tokenContainer = document.getElementById("tokens");

    tokens.forEach(token => {
      const el = document.createElement("span");
      el.className = "token";
      el.textContent = token;
      tokenContainer.appendChild(el);
    });

    await wait(900);

    // STEP 2: EMBEDDINGS
    activateStep(2, 40);
    const embedContainer = document.getElementById("embeddings");

    tokens.forEach(() => {
      const el = document.createElement("span");
      el.className = "token";
      el.textContent = "[0.13, -0.42, 0.88...]";
      embedContainer.appendChild(el);
    });

    await wait(900);

    // STEP 3: ATTENTION
    activateStep(3, 60);
    await wait(900);

    // STEP 4: PROBABILITY
    activateStep(4, 80);
    await wait(900);

    // STEP 5: OUTPUT
    activateStep(5, 100);
    await wait(600);

    document.getElementById("finalOutput").innerHTML =
      "ðŸ¤– <strong>Final Answer:</strong><br/>" +
      "The model uses probability, context, and learned patterns to generate the most helpful response.";
  }

  /*
    Highlights current step and updates progress bar
  */
  function activateStep(stepNumber, progress) {
    document.getElementById("progressBar").style.width = progress + "%";
    document.getElementById("step" + stepNumber).classList.add("active");
  }

  /*
    Reset UI for a new run
  */
  function resetUI() {
    document.getElementById("tokens").innerHTML = "";
    document.getElementById("embeddings").innerHTML = "";
    document.getElementById("finalOutput").innerHTML = "";
    document.getElementById("progressBar").style.width = "0%";

    document.querySelectorAll(".step").forEach(step => {
      step.classList.remove("active");
    });
  }
</script>

</body>
</html>
